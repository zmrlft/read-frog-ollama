echo "ğŸ” Checking for uncommented eruda imports..."
if grep -r "import.*eruda" src/ --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx" | grep -v ":.*[[:space:]]*//.*import.*eruda"; then
  echo "âŒ Found uncommented eruda imports in the codebase!"
  echo "Please comment out or remove eruda imports before pushing."
  exit 1
else
  echo "âœ… No uncommented eruda imports found."
fi

pnpm syncpack:lint
pnpm type-check

# Check if SKIP_FREE_API environment variable is set
if [ "$SKIP_FREE_API" = "true" ]; then
  pnpm vitest --exclude="**/free-api.test.ts"
else
  pnpm test
fi